<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header" *ngIf="mode == 'edit'"><i class="fa fa-server fa-fw"></i> Edit Repo-Mirror</h1>
    <h1 class="page-header" *ngIf="mode == 'new'"><i class="fa fa-server fa-fw"></i> New Repo-Mirror</h1>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        <i class="fa fa-desktop fa-fw"></i> Mirror
      </div>
      <div class="panel-body">
        <div class="form-group" [class.has-error]="!isDescriptionValid()">
          <label class="control-label" for="description">Description</label>
          <input type="text" class="form-control" [(ngModel)]="mirror.description" id="description">
        </div>
        <div class="form-group" [class.has-error]="!isPathValid()">
          <label class="control-label" for="path">Path</label>
          <input type="text" class="form-control" [(ngModel)]="mirror.path" id="path">
        </div>

        <div class="form-group">
          <label class="control-label" for="repo">Repo</label>
          <input type="text" class="form-control" [(ngModel)]="repo.name" id="repo" disabled>
        </div>

        <div class="form-group">
          <label class="control-label" for="indexertype">Indexer</label>
          <select class="form-control" [(ngModel)]="mirror.indexerType" id="indexertype">
            <option value="NONE">NONE</option>
            <option value="FILE">FILE</option>
            <option value="RPM">RPM</option>
          </select>
        </div>

        <div class="form-group">
          <label class="control-label" for="indextype">Index Type</label>
          <select class="form-control" [(ngModel)]="mirror.providerType" id="indextype">
            <option value="NONE">NONE</option>
            <option value="HTTP">HTTP</option>
            <option value="AWSS3">AWSS3</option>
            <option value="FILE">FILE</option>
          </select>
        </div>

        <div class="form-group" *ngIf="mirror.providerType == 'HTTP' || mirror.providerType == 'FILE'">
          <label *ngIf="mirror.providerType == 'HTTP'" class="control-label" for="basepath">URL</label>
          <label *ngIf="mirror.providerType == 'FILE'" class="control-label" for="basepath">File-Path</label>
          <input type="text" class="form-control" [(ngModel)]="mirror.basePath" id="basepath">
        </div>

        <div *ngIf="mirror.providerType == 'AWSS3'">
          <div class="form-group">
            <label class="control-label" for="s3bucketname">S3 Bucketname</label>
            <input type="text" class="form-control" [(ngModel)]="mirror.bucketName" id="s3bucketname">
          </div>
          <div class="form-group">
            <label class="control-label" for="s3region">AWS Region</label>
            <input type="text" class="form-control" [(ngModel)]="mirror.awsRegion" id="s3region">
          </div>
          <div class="form-group">
            <label class="control-label" for="s3accesskey">S3 Access Key</label>
            <input type="text" class="form-control" [(ngModel)]="mirror.accessKeyId" id="s3accesskey">
          </div>
          <div class="form-group">
            <label class="control-label" for="s3secret">S3 Secret Key</label>
            <input type="text" class="form-control" [(ngModel)]="mirror.secretKey" id="s3secret">
          </div>
        </div>
        <div class="pull-right">
          <button *ngIf="returnToOverview" [routerLink]="['/repo']" class="btn btn-default">Back</button>
          <button *ngIf="!returnToOverview" [routerLink]="['/repo',repo.name]" class="btn btn-default">Back
          </button>
          <button (click)="save()" class="btn btn-info" [disabled]="!isDescriptionValid() || !isPathValid()">Save</button>
        </div>
      </div>
    </div>
  </div>
</div>

