<cc-title [title]="'Packages'" titleIcon="fa-book"></cc-title>

<div class="row">
  <div class="col-md-6 col-lg-3">
    <cc-filter (onQueryChange)="searchQuery = $event"></cc-filter>
  </div>
  <div class="col-md-6 col-lg-3">
    <cc-filter [mode]="'select'" [label]="'Limit'" [data]="limits" [selected]="limit" (onQueryChange)="limit = $event"></cc-filter>
  </div>
</div>

<div class="row" *ngIf="!packagesLoaded">
  <div class="col-sm-12">
    <div class="alert alert-info">
      <i class="fa fa-spinner fa-pulse fa-fw"></i>
      Loading packages...
    </div>
  </div>
</div>

<div class="row" *ngIf="packagesLoaded && packages.length < 1">
  <div class="col-sm-12">
    <div class="alert alert-warning" role="alert-1">
      No packages found
    </div>
  </div>
</div>

<div class="row" *ngIf="packages && packages.length > 0">
  <div class="col-md-12">
    <cc-panel [title]="'All available packages'" icon="fa-book">
      <ng-container cc-panel-body>
        <div class="row">
          <div class="col-md-12">
            <table class="table-responsive table table-striped table-hover dataTable" cc-panel-body>
              <thead>
              <tr>
                <th class="sorting_asc" width="30%">Package-Name</th>
                <th class="sorting"># Versions</th>
                <th class="sorting">Oldest version</th>
                <th class="sorting">Latest version</th>
                <th width="15px"></th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let pkg of packages" (dblclick)="gotoDetails(pkg)">
                <td>
                  {{pkg.name}}
                </td>
                <td>
                  {{pkg.versions.length}}
                </td>
                <td>
                  {{pkg.versions[0]}}
                </td>
                <td>
                  {{pkg.versions[pkg.versions.length - 1]}}
                </td>
                <td>
                  <a title="Show Details" [routerLink]="[pkg.name]"><i class="fa fa-edit fa-fw"></i></a>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>

        <cc-pagination [start]="start" [end]="end" [totalCount]="totalPackageCount" [pageCount]="pageCount" [pages]="pages" [currentPage]="page">
        </cc-pagination>

      </ng-container>
    </cc-panel>
  </div>
</div>
